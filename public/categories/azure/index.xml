<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Azure on My New Hugo Site</title><link>http://localhost:1313/categories/azure/</link><description>Recent content in Azure on My New Hugo Site</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Mon, 10 Jun 2024 08:46:23 +0000</lastBuildDate><atom:link href="http://localhost:1313/categories/azure/index.xml" rel="self" type="application/rss+xml"/><item><title>Setting Up Chrony for Time Synchronization in Azure VMs</title><link>http://localhost:1313/docs/legacy/2024-06-10-azure-linux-vm-time-synchronization/</link><pubDate>Mon, 10 Jun 2024 08:46:23 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2024-06-10-azure-linux-vm-time-synchronization/</guid><description>Azure VMs have several options for maintaining accurate time:
1. VMs can inherit time from their host (host time).
2. VMs can synchronize directly with an external time server.
3. A combination of both methods can be used.
When VMs restart, experience network traffic, or undergo maintenance, their clocks might drift. Azure helps manage this through the VMICTimeSync service and the integration of the Precision Time Protocol. Azure hosts are synced to Microsoft’s internal time servers, connected to GPS-antenna-equipped Stratum 1 devices.</description></item><item><title>Automatic OS Upgrade is not supported for this Virtual Machine Scale Set because a health probe or health extension was not specified.</title><link>http://localhost:1313/docs/legacy/2024-03-28-automatic-os-upgrade-vmss-issue/</link><pubDate>Thu, 28 Mar 2024 18:09:38 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2024-03-28-automatic-os-upgrade-vmss-issue/</guid><description>If you face this issue during your VMSS deployment:
ErrorCode: DeploymentFailed
Content: {“status”:”Failed”,”error”:{“code”:”DeploymentFailed”,”target”:”/subscriptions/YOURID/resourceGroups/vmss/providers/Microsoft.Resources/deployments/VMSS_AutomaticOsUpgrade-240328-1303″,”message”:”At least one resource deployment operation failed. Please list deployment operations for details. Please see https://aka.ms/arm-deployment-operations for usage details.”,”details”:[{“code”:”BadRequest”,”message”:”Automatic OS Upgrade is not supported for this Virtual Machine Scale Set because a health probe or health extension was not specified.“}]}}
it is very easy to bypass it.
If you do not have a port for your app to monitor, you can monitor management ports, like so:</description></item><item><title>List services scheduled for retirement in Azure Graph / KQL</title><link>http://localhost:1313/docs/legacy/2024-02-09-kql-query-microsoft-services-retirement/</link><pubDate>Fri, 09 Feb 2024 11:34:55 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2024-02-09-kql-query-microsoft-services-retirement/</guid><description>Below you will find a KQL query to list services that are about to be retired by Microsoft.
This is intended to check against the list of resources announced at
https://azure.microsoft.com/updates/?updateType=retirements
As a foundation, I used this workbook:
&amp;lt;https://github.com/microsoft/Application-Insights-Workbooks/blob/master/Workbooks/Azure%20Advisor/AzureServiceRetirement/Azure%20Services%20Retirement.workbook &amp;gt;
from which I extracted the KQL.</description></item><item><title>Encountering issues with Azure IAAS Virtual Machines not joining Azure AD post-deployment from a sysprepped template?</title><link>http://localhost:1313/docs/legacy/2024-02-02-azure-vm-deployment-azure-ad-issue/</link><pubDate>Fri, 02 Feb 2024 11:09:15 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2024-02-02-azure-vm-deployment-azure-ad-issue/</guid><description>Sysprep is designed to prepare an installation of Windows for duplication, clearing out specific information like registry keys, certificates, and more to avoid duplication errors. Yet, it doesn’t entirely remove all data, especially those related to Azure AD/Microsoft Entra ID or Intune enrollments. These services attach certificates and store various information across the registry, which sysprep overlooks.
Cloning a device already joined to AzureAD/Microsoft Entra ID or enrolled in Intune creates identical digital twins from Azure’s AAD/Entra perspective, making it impossible for Azure AD/Intune to differentiate between them due to identical device IDs and certificates.</description></item><item><title>Azure Resource Graph Queries to see who has access to Azure Subscriptions</title><link>http://localhost:1313/docs/legacy/2024-01-15-azzure-resource-graph-query-access/</link><pubDate>Mon, 15 Jan 2024 14:30:41 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2024-01-15-azzure-resource-graph-query-access/</guid><description>Occasionally, you may need to gather data regarding all resource groups, identities, and users with access to your Azure subscriptions. This can be efficiently achieved using the Azure Resource Graph.
Some samples below.
Shows all resources:</description></item><item><title>Enabling Anonymous Access to Azure Blob Storage</title><link>http://localhost:1313/docs/legacy/2023-11-07-enable-anonymous-access-azure-blob-storage/</link><pubDate>Tue, 07 Nov 2023 14:39:06 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-11-07-enable-anonymous-access-azure-blob-storage/</guid><description>Step 1: Configure Blob Anonymous Access # To begin, navigate to your Azure Storage account’s configuration blade. Here, you’ll find an option to enable blob anonymous access. This is the first and fundamental step in making your blobs publicly accessible.
With blob anonymous access enabled, the next step involves setting the appropriate access level on your container. Choose the container you wish to modify and proceed to change its access level settings.</description></item><item><title>PowerShell: Analyzing Virtual Machine Activity Logs to Determine Uptime and Downtime</title><link>http://localhost:1313/docs/legacy/2023-10-12-azure-vm-log-analysis-powershell/</link><pubDate>Thu, 12 Oct 2023 10:29:25 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-10-12-azure-vm-log-analysis-powershell/</guid><description>One common task many administrators often face is monitoring and analyzing virtual machine activity logs to determine uptime and downtime.
Here is a script that can help you getting started:
Write-Host &amp;ldquo;Fetching activity logs for the specified VM in the last $daysAgo days&amp;hellip;&amp;rdquo; $logs = Get-AzLog -ResourceGroupName $resourceGroupName -StartTime (Get-Date).AddDays(-$daysAgo)
Write-Host &amp;ldquo;Filtering logs for VM start, stop, and deallocate actions that have &amp;lsquo;Succeeded&amp;rsquo; status&amp;hellip;&amp;rdquo; $relevantLogs = $logs | Where-Object { ( $.</description></item><item><title>Nested Virtualization Madness: Running DOSBox Inside Windows XP Inside Windows 10 on an Azure VM with Hyper-V</title><link>http://localhost:1313/docs/legacy/2023-10-11-nested-virtualization-madness-running-dosbox-inside-windows-xp-inside-windows-10-on-an-azure-vm-with-hyper-v/</link><pubDate>Wed, 11 Oct 2023 14:13:24 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-10-11-nested-virtualization-madness-running-dosbox-inside-windows-xp-inside-windows-10-on-an-azure-vm-with-hyper-v/</guid><description>Just for fun, I have an Azure VM running Hyper-V, which in turn is running Windows 10. On that Windows 10, I’m running Windows XP, and within XP, I have DOSBox running.</description></item><item><title>PowerShell: Script-Based Workaround for Renaming Azure VMs and Switching to Unsupported Sizes</title><link>http://localhost:1313/docs/legacy/2023-10-10-bypassing-azure-vm-limitations-script-based-solution/</link><pubDate>Tue, 10 Oct 2023 14:48:05 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-10-10-bypassing-azure-vm-limitations-script-based-solution/</guid><description>Inability to change the name of an existing Azure VM. Constraints when resizing VMs, specifically: You can’t resize a VM size that has a local temp disk to a VM size without one, and vice versa. The only combinations allowed for resizing are:
VM (with no local temp disk) -&amp;gt; VM (with no local temp disk) VM (with local temp disk) -&amp;gt; VM (with local temp disk) Workaround # Below is a PowerShell script that allows you to circumvent the VM name and size restrictions while keeping the disk, network interface card, and extensions in place.</description></item><item><title>Azure Capacity Reservations &amp;#038; Azure Reserved Instances</title><link>http://localhost:1313/docs/legacy/2023-10-08-understanding-azure-capacity-reservations-guide/</link><pubDate>Sun, 08 Oct 2023 18:53:13 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-10-08-understanding-azure-capacity-reservations-guide/</guid><description>Azure Reserved Instances # Azure Reserved Instances allow you to commit to a specific amount of resources for a defined period (one or three years), in return for a discounted rate. For instance, if you commit to using a certain type of virtual machine for one year, Azure offers you a huge discount. Committing for three years increases the discount to even further. The main point to note here is that while you get cost savings, Azure Reserved Instances do not guarantee that the reserved capacity will be available when you need it.</description></item><item><title>Rest API: Azure REST API POC</title><link>http://localhost:1313/docs/legacy/2023-09-28-azure-rest-api-powershell-poc/</link><pubDate>Thu, 28 Sep 2023 13:20:38 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-09-28-azure-rest-api-powershell-poc/</guid><description>This PowerShell script serves as a Proof of Concept for teaching how to interact with Azure resources using REST API calls via PowerShell. It automates a series of Azure resource management tasks, providing a hands-on example for those looking to understand Azure REST API operations.
Operations Covered: # Create a Managed Disk: Demonstrates how to allocate a managed disk in Azure. Create a Virtual Network (VNet): Shows the steps to set up a virtual network.</description></item><item><title>How to Upgrade Legacy Azure Windows VMs Not Supported by Azure&amp;#8217;s Native In-Place Upgrade Feature</title><link>http://localhost:1313/docs/legacy/2023-09-27-how-to-upgrade-legacy-azure-windows-vms/</link><pubDate>Wed, 27 Sep 2023 00:39:31 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-09-27-how-to-upgrade-legacy-azure-windows-vms/</guid><description>In a previous guide, we discussed upgrading Windows Server 2012 R2 (WS2012R2) in Azure using Azure’s native upgrade mechanism. However, what do you do if you’re dealing with a legacy workload? If you’re concerned about the long-term security and supportability of your VM, and redeploying or moving everything within the OS isn’t feasible, this guide is for you. Here, I’ll walk you through the process of upgrading a legacy Azure Windows VM without relying on any on-premises solutions or exporting the drive.</description></item><item><title>Deploy Storage Spaces on a Single Virtual Machine to Get Optimal Performance/Cost Ratio</title><link>http://localhost:1313/docs/legacy/2023-09-25-deploy-storage-spaces-on-azure-vm/</link><pubDate>Mon, 25 Sep 2023 22:10:24 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-09-25-deploy-storage-spaces-on-azure-vm/</guid><description>Storage Spaces is a feature of Windows Server that allows you to pool multiple physical disks together to create a single virtual disk. This can be useful for a variety of reasons, such as:
To increase the overall capacity of your storage. To improve the performance of your storage by distributing data across multiple disks. To get azure host caching feature on disks that are higher than 4 TB. In this article, I will show you how to deploy Storage Spaces on a single virtual machine in Azure to achieve optimal storage performance with minimal cost.</description></item><item><title>In Place Upgrade Your Windows Server Azure VM: Step by Step Guide</title><link>http://localhost:1313/docs/legacy/2023-09-24-windows-server-azure-vm-in-place-upgrade/</link><pubDate>Sun, 24 Sep 2023 16:28:12 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-09-24-windows-server-azure-vm-in-place-upgrade/</guid><description>Upgrading your Windows Server Azure VM to a newer version can seem daunting, but with the right steps, it can be a smooth process. This guide will walk you through a step-by-step process, complete with visuals, to upgrade your Windows VM in Azure, for instance, from WS 2016 to 2019.
Prerequisites for a Successful Upgrade # Before diving into the upgrade, ensure the following prerequisites are met:
Managed Disk Usage</description></item><item><title>How to resolve the NLA error in Azure VMs when the computer object is removed from Active Directory</title><link>http://localhost:1313/docs/legacy/2023-09-22-how-to-resolve-the-nla-error-in-azure-vms-when-the-computer-object-is-removed-from-active-directory/</link><pubDate>Fri, 22 Sep 2023 21:05:09 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-09-22-how-to-resolve-the-nla-error-in-azure-vms-when-the-computer-object-is-removed-from-active-directory/</guid><description>If you’re working with Azure Virtual Machines, you might encounter a situation where you see an error related to Network Level Authentication. This typically arises when your VM loses communication with the Domain Controller, the trust relationship between the VM and DC is compromised, or the VM’s computer object has been removed from the DC.
Navigate to the Azure portal.
Locate the VM that is experiencing the NLA error.
Click Run Command.</description></item><item><title>Why can&amp;#8217;t I resize the underlying storage used by Storage Spaces?</title><link>http://localhost:1313/docs/legacy/2023-09-21-why-cant-i-resize-the-underlying-storage-used-by-storage-spaces-direct/</link><pubDate>Thu, 21 Sep 2023 22:56:14 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-09-21-why-cant-i-resize-the-underlying-storage-used-by-storage-spaces-direct/</guid><description>Storage Spaces is a Windows Server storage technology that pools the storage capacity of multiple disks into a single virtual disk. This technology is often used to create highly available and scalable storage solutions for virtual machines and other workloads.
One of the limitations of Storage Spaces is that it does not support resizing the underlying storage. This means that if you need to add more storage to a Storage Spaces, you must do so by adding new drives.</description></item><item><title>PowerShell: Download and Use AzCopy (Windows) to Upload Files to Azure Blob Storage</title><link>http://localhost:1313/docs/legacy/2023-09-20-powershell-download-and-use-azcopy-to-upload-files-to-azure-blob-storage/</link><pubDate>Wed, 20 Sep 2023 15:22:09 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-09-20-powershell-download-and-use-azcopy-to-upload-files-to-azure-blob-storage/</guid><description>AzCopy is a powerful command-line utility that allows for streamlined data transfer to and from Azure Blob, File, and Table storage.
Script below will download, install, and utilize AzCopy on a Windows machine to upload a file to Azure Blob Storage.
$azCopyUrl = &amp;ldquo;https://aka.ms/downloadazcopy-v10-windows" $destination = &amp;ldquo;C:\Temp\AzCopy.zip&amp;rdquo;
Ensure C:\Temp exists # if (-not (Test-Path &amp;ldquo;C:\Temp&amp;rdquo;)) { New-Item -ItemType Directory -Path &amp;ldquo;C:\Temp&amp;rdquo; -Force } Invoke-WebRequest -Uri $azCopyUrl -OutFile $destination Expand-Archive -Path $destination -DestinationPath &amp;ldquo;C:\Temp\azcopy&amp;rdquo; $azCopyExe = Get-ChildItem -Path &amp;ldquo;C:\Temp\azcopy&amp;rdquo; -Recurse -Filter &amp;ldquo;azcopy.</description></item><item><title>Hosting a Custom ChatGPT Web UI with Your Own API Keys</title><link>http://localhost:1313/docs/legacy/2023-09-16-hosting-a-custom-chatgpt-web-ui-with-your-own-api-keys/</link><pubDate>Sat, 16 Sep 2023 23:04:22 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-09-16-hosting-a-custom-chatgpt-web-ui-with-your-own-api-keys/</guid><description>With the increasing popularity of ChatGPT, many IT enthusiasts are exploring ways to host their custom ChatGPT web frontends. There are several options available ranging from the Microsoft’s “Azure Open AI at scale” project to various third-party ones. However, for this exercise I’ve picked a 3rd party one, as it is lightweight, doesn’t require any extra components such as Azure Active Directory Microsoft Entra ID or databases to function, and it is very easy to deploy.</description></item><item><title>Powershell: Tracking Last Domain Login Events on Azure VMs</title><link>http://localhost:1313/docs/legacy/2023-09-11-tracking-last-domain-login-events-on-azure-vms-a-handy-script/</link><pubDate>Mon, 11 Sep 2023 07:29:10 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-09-11-tracking-last-domain-login-events-on-azure-vms-a-handy-script/</guid><description>When managing virtual machines (VMs) in a cloud environment like Azure, it’s crucial to monitor user activities for various reasons. Whether it’s for auditing, security, or simply to track unused resources, knowing the last time someone logged in can provide valuable insights. If you’re not sure whether anyone is even logging into your Azure VM, you can check the last domain login events without breaking a sweat. All you need is PowerShell and Azure’s “Run Command” feature.</description></item><item><title>How Hyper-V Works, High Level Overview</title><link>http://localhost:1313/docs/legacy/2023-09-10-how-hyper-v-works-high-level-overview/</link><pubDate>Sun, 10 Sep 2023 19:28:13 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-09-10-how-hyper-v-works-high-level-overview/</guid><description>Hyper-V stands as Microsoft’s first standalone hypervisor, offering extensive support for the x86-64 architecture. It has established its own space in the virtualization market, going toe-to-toe with competitors like VMware ESXi, Xen, and KVM. One of its distinct advantages is its native integration with Microsoft-centric environments.
Contrary to many Type 2 hypervisors that function atop an existing operating system, Hyper-V is a Type 1 hypervisor that interacts directly with the hardware.</description></item><item><title>Azure Nested Virtualization: Hyper-V cannot be installed because virtualization support is not enabled in the BIOS.</title><link>http://localhost:1313/docs/legacy/2023-08-25-azure-nested-virtualization-hyper-v-cannot-be-installed-because-virtualization-support-is-not-enabled-in-the-bios/</link><pubDate>Fri, 25 Aug 2023 16:54:41 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-08-25-azure-nested-virtualization-hyper-v-cannot-be-installed-because-virtualization-support-is-not-enabled-in-the-bios/</guid><description>Nested virtualization is an exciting and powerful feature that allows you to run a virtual machine within another virtual machine. This capability has numerous applications in the fields of development, testing, and security. However, when trying to enable it in Azure, you may encounter a specific error related to nested virtualization:
Fortunately, the fix for this problem is relatively straightforward and can be done directly through the Command Prompt. Here’s a step-by-step guide:</description></item><item><title>Free OPNsense Firewall NVA in Azure</title><link>http://localhost:1313/docs/legacy/2023-08-24-free-opnsense-firewall-nva-in-azure/</link><pubDate>Thu, 24 Aug 2023 14:34:55 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-08-24-free-opnsense-firewall-nva-in-azure/</guid><description>I’ve stumbled upon this GitHub repository that’s pretty awesome. It’s got a deployment script that lets you run OPNSense Community Edition in Azure for free.
If you’re into firewalls, networking, or just like trying out new tech stuff, this GitHub repository is worth a glance. It’s fun, it’s free, and it’s a playground for anyone interested in what OPNSense can do in Azure.
Here’s the Link to the Repository if you want to check it out.</description></item><item><title>You&amp;#8217;ve mounted your storage account, but you see that the space available is less than visible on Azure Portal</title><link>http://localhost:1313/docs/legacy/2023-08-23-youve-mounted-your-storage-account-but-you-see-that-the-space-available-is-less-than-visible-on-azure-portal/</link><pubDate>Wed, 23 Aug 2023 11:58:07 +0000</pubDate><guid>http://localhost:1313/docs/legacy/2023-08-23-youve-mounted-your-storage-account-but-you-see-that-the-space-available-is-less-than-visible-on-azure-portal/</guid><description>If you mounted your Azure Storage account via SMB, but you see that the free space is being limited:</description></item></channel></rss>